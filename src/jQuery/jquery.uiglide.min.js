/*!
 * uiGlide v1.0.0
 * http://uiglide.com
 *
 * Copyright WCP Digital and Patrick Purcell
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * Date: 2016-07-25
 */
"use strict";!function(t){function e(e){var n=this,o="1.0.0",i=[],r=0,l=null,a=[],s="",u=!1,d=!1,c=null,p=null,f=null,h=null,m=null,g=null,x=null,v=null,B=null,y=null,b=null,w=null,C=null,S=null,I={parent:document.body||null,steps:[],defaultSet:"uiGlide",fadeIn:1e3,fadeOut:500,documentPadding:20,transition:500,padding:10,borderWidth:1,minWidth:180,minHeight:200,maxWidth:800,maxHeight:600,passthrough:!0,dataUISet:"data-uigset",dataUIStep:"data-uigstep",dataUITitle:"data-uigtitle",dataUIDesc:"data-uigdesc",dataUIHtml:"data-uightml",dataUIPassthrough:"data-uigpassthrough",cssLeftBox:"uig-box uig-box-left",cssRightBox:"uig-box uig-box-right",cssTopBox:"uig-box uig-box-top",cssBottomBox:"uig-box uig-box-bottom",cssFocusBox:"uig-focusbox",cssFocusBoxLeft:"uig-focusbox-left",cssFocusBoxRight:"uig-focusbox-right",cssFocusBoxTop:"uig-focusbox-top",cssFocusBoxBottom:"uig-focusbox-bottom",cssFocusContent:"uig-focus-content",cssTitleBox:"uig-titlebox",cssDescBox:"uig-descbox",cssControlsBox:"uig-controlsbox",cssPrevBtn:"uig-btn uig-btn-prev",cssNextBtn:"uig-btn uig-btn-next",cssCloseBtn:"uig-btn uig-btn-close",htmlPrevBtn:'<a href="javascript:void(0)">&lt;</a>',htmlNextBtn:'<a href="javascript:void(0)">&gt;</a>',htmlCloseBtn:'<a href="javascript:void(0)">&#10006;</a>',htmlFocusContent:"<div></div>",htmlControlsContent:"<div></div>",onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,onBeforeGoto:null,onAfterGoto:null,onBeforeStep:null,onAfterStep:null,onStep:null},T=function(){return"ontouchstart"in window||navigator.maxTouchPoints},E=function(t,e,n){return t+n*(e-t)},H=function(t,e){t.style.opacity=e;var n=100*e;t.style.filter="alpha(opacity="+n+")"},W=function(t,e,n){var o=60,i=0,r=Date.now(),l=1e3/o,a=e,s=0,u=0,d=setInterval(function(){return s=u/a,s>=1?(t(1),clearInterval(d),n&&n()):(t(s),i=Math.floor(1/(.001*(Date.now()-r))),r=Date.now(),void(u+=l*(o/i)))},l);return d},M=function(t){var e=n.document,o=n.window,i=0,r=0;return t!==e.body&&t!==e.documentElement?(i=t.scrollLeft,r=t.scrollTop):(i=o.scrollX||o.pageXOffset||e.documentElement.scrollLeft,r=o.scrollY||o.pageYOffset||e.documentElement.scrollTop),{left:i,top:r}},F=function(){var t=n.document.body,e=n.document.documentElement,o=Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth),i=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);return{width:o,height:i,left:0,top:0}},N=function(t){var e=n.document,o=n.window,i=t.getBoundingClientRect(),r=i.left+(o.scrollX||o.pageXOffset||e.documentElement.scrollLeft),l=i.top+(o.scrollY||o.pageYOffset||e.documentElement.scrollTop),a=i.right-i.left,s=i.bottom-i.top,u=r+.5*a,d=l+.5*s;return{left:r,top:l,width:a,height:s,center:{left:u,top:d}}},L=function(t,e){var o=n.document;n.window;if(e==o.body||e==o.documentElement)return N(t);var i=M(e),r=e.getBoundingClientRect(),l=t.getBoundingClientRect(),a=l.left-r.left+i.left,s=l.top-r.top+i.top,u=l.right-l.left,d=l.bottom-l.top,c=a+.5*u,p=s+.5*d;return{left:a,top:s,width:u,height:d,center:{left:c,top:p}}},P=function(){var t=n.document.createElement("DIV");return t.style.position="absolute",t.style.display="block",t.style.width="0px",t.style.height="0px",t.style.left="0px",t.style.top="0px",t},A=function(){G(r+1)},D=function(){G(r-1)},G=function(t){var e=n.document;n.window;if(I&&I.onBeforeGoto&&I.onBeforeGoto(n),c&&k(),(isNaN(t)||void 0===a[t])&&(t=0),l&&l.onAfterStep&&l.onAfterStep(n),l=a[t]||null,r=t,!l||!l.element)throw new Error("uiGlide: Step not found: Set: "+a+", Index: "+r);l&&l.onBeforeStep&&l.onBeforeStep(n),l&&l.title?(m.style.display="block",m.innerHTML=l.title):m.style.display="none",l&&l.desc?(g.style.display="block",g.innerHTML=l.desc):g.style.display="none",l&&l.html?(h.style.display="block",h.innerHTML=l.html):h.style.display="none",l.passthrough?(f.style.pointerEvents="none",x.style.pointerEvents="none",v.style.pointerEvents="auto",B.style.pointerEvents="auto",y.style.pointerEvents="auto"):(f.style.pointerEvents="auto",x.style.pointerEvents="auto"),f.style.borderWidth=l.borderWidth+"px",0>=t?v.style.display="none":v.style.display="block",t>=a.length-1?B.style.display="none":B.style.display="block";var o=L(f,I.parent),i=(parseInt(f.style.width,10),parseInt(f.style.height,10),parseInt(f.style.left,10),parseInt(f.style.top,10),M(I.parent));return R(l),c=W(function(t){var n=L(l.element,I.parent),r=2*l.padding,a=2*l.borderWidth,s=Math.max(n.width+r-a,l.minWidth),u=Math.max(n.height+r-a,l.minHeight);s=Math.min(s+r-a,l.maxWidth),u=Math.min(u+r-a,l.maxHeight);var d=n.center.left-.5*s,c=n.center.top-.5*u,p=F(),f={left:p.left+I.documentPadding,right:p.left+p.width-I.documentPadding,top:p.top+I.documentPadding,bottom:p.top+p.height-I.documentPadding};f.left>d&&(d+=f.left-d),f.right<d+s&&(s-=d+s-f.right),f.top>c&&(c+=f.top-c),f.bottom<c+u&&(u-=c+u-f.bottom);var h=E(o.left,d,t),m=E(o.top,c,t),g=E(o.width,s,t),x=E(o.height,u,t);O(h,m,g,x);var v=d-I.documentPadding,B=c-I.documentPadding,y=E(i.left,v,t),b=E(i.top,B,t);I.parent&&I.parent!=e.body&&I.parent!=e.documentElement?(I.parent.scrollLeft=y-I.documentPadding,I.parent.scrollTop=b-I.documentPadding):(e.documentElement.scrollLeft=e.body.scrollLeft=y-I.documentPadding,e.documentElement.scrollTop=e.body.scrollTop=b-I.documentPadding)},l.transition,function(){k(),V(l),l&&l.onStep&&l.onStep(n),I&&I.onAfterGoto&&I.onAfterGoto(n)}),n},k=function(){return clearInterval(c),c=null,n},U=function(t,e,n,o,i,r,l){t.style.width=e,t.style.height=n,t.style.left=o,t.style.top=i,t.style.right=r,t.style.bottom=l},O=function(t,e,n,o){var i=n,r=o,l=t,a=e,s=F();U(f,Math.max(i,0)+"px",Math.max(r,0)+"px",l+"px",a+"px","auto","auto"),U(x,Math.max(i,0)+"px",Math.max(r,0)+"px",l+"px",a+"px","auto","auto"),U(b,Math.max(l,0)+"px",Math.max(s.height,0)+"px","0px","0px","auto","auto"),U(w,"auto",Math.max(s.height,0)+"px",l+i+"px","0px","0px","auto"),U(C,Math.max(i,0)+"px",Math.max(a,0)+"px",l+"px","0px","auto","auto"),U(S,Math.max(i,0)+"px",Math.max(s.height-(a+r),0)+"px",l+"px",a+r+"px","auto","auto")},V=function(t){var e=L(f,I.parent),o=F(),i=e.top-o.top,r=o.top+o.height-(e.top+e.height),l=e.left-o.left,a=o.left+o.width-(e.left+e.width);r>=i?n.addClass(f,t.cssFocusBoxTop||I.cssFocusBoxTop):n.addClass(f,t.cssFocusBoxTop||I.cssFocusBoxBottom),a>=l?n.addClass(f,t.cssFocusBoxTop||I.cssFocusBoxLeft):n.addClass(f,t.cssFocusBoxTop||I.cssFocusBoxRight)},R=function(t){f.className=t.cssFocusBox||I.cssFocusBox},Y=function(){if(t(n.window).off("orientationchange",nt),t(n.window).off("resize",nt),t(I.parent).off("orientationchange",nt),t(I.parent).off("resize",nt),t(v).off("click",_),t(v).off("touchstart",_),t(B).off("click",tt),t(B).off("touchstart",tt),t(y).off("click",et),t(y).off("touchstart",et),!T())for(var e=[b,w,C,S],o=0,i=e.length;i>o;o++)t(e[o]).off("click",et),t(e[o]).off("touchstart",et);for(var r=[y,B,v,g,m,f,x,b,w,C,S],o=r.length-1;o>=0;o--)t(r[o]).remove(),r[o]=null;I&&I.onAfterClose&&I.onAfterClose(n),d=!1},j=function(){if(u)throw new Error("uiGlide: Tried to close before completing the opening.");d=!0,I&&I.onBeforeClose&&I.onBeforeClose(n),c&&k();var t=[f,x,b,w,C,S];return W(function(e){e=1-e;for(var n=t.length-1;n>=0;n--)H(t[n],e)},I.fadeOut,Y),n},z=function(t){s=t||i[0].set||I.defaultSet,a=[];for(var e=0,n=i.length;n>e;e++)i[e].set==s&&a.push(i[e]);if(0==a.length)throw new Error("uiGlide: This set is empty or doesn't exist.");return Z(a)},X=function(){if(f=P(),I.parent.appendChild(f),h=n.document.createElement("DIV"),h.innerHTML=I.htmlFocusContent,h.className=I.cssFocusContent,f.appendChild(h),m=n.document.createElement("DIV"),m.className=I.cssTitleBox,f.appendChild(m),g=n.document.createElement("DIV"),g.className=I.cssDescBox,f.appendChild(g),x=P(),x.innerHTML=I.htmlControlsContent,x.className=I.cssControlsBox,I.parent.appendChild(x),v=n.document.createElement("DIV"),v.className=I.cssPrevBtn,v.innerHTML=I.htmlPrevBtn,x.appendChild(v),B=n.document.createElement("DIV"),B.className=I.cssNextBtn,B.innerHTML=I.htmlNextBtn,x.appendChild(B),y=n.document.createElement("DIV"),y.className=I.cssCloseBtn,y.innerHTML=I.htmlCloseBtn,x.appendChild(y),t(v).on("click",_),t(v).on("touchstart",_),t(B).on("click",tt),t(B).on("touchstart",tt),t(y).on("click",et),t(y).on("touchstart",et),b=P(),b.className=I.cssLeftBox,I.parent.appendChild(b),w=P(),w.className=I.cssRightBox,I.parent.appendChild(w),C=P(),C.className=I.cssTopBox,I.parent.appendChild(C),S=P(),S.className=I.cssBottomBox,I.parent.appendChild(S),!T())for(var e=[b,w,C,S],o=0,i=e.length;i>o;o++)t(e[o]).on("click",et),t(e[o]).on("touchstart",et);t(I.parent).on("orientationchange",nt),t(I.parent).on("resize",nt),t(n.window).on("orientationchange",nt),t(n.window).on("resize",nt);var r=F(),l=200,a=200,s=.5*r.width-l,u=100;O(s,u,l,a)},Q=function(t,e){if(d)throw new Error("uiGlide: Tried to open before completing the close.");if(f)throw new Error("uiGlide: You can only open one glide at a time.");u=!0,I&&I.onBeforeOpen&&I.onBeforeOpen(n),X(),W(function(t){H(f,t),H(x,t)},I.fadeIn);var o=[b,w,C,S];return W(function(t){for(var e=o.length-1;e>=0;e--)H(o[e],t)},1.5*I.fadeIn),I&&I.onAfterOpen&&I.onAfterOpen(n),z(e),u=!1,G(t)},q=function(){for(var e=[],o=t("["+I.dataUIStep+"]",I.parent),i=0,r=o.length,l=0,a=null,s="",u="",d="",c=null;r>i;i++)l=parseInt(t(o[i]).attr(I.dataUIStep),10),a=t(o[i]).attr(I.dataUISet),s=t(o[i]).attr(I.dataUITitle),u=t(o[i]).attr(I.dataUIDesc),d=t(o[i]).attr(I.dataUIHtml),c=t(o[i]).attr(I.dataUIPassthrough),e.push({index:l,element:o[i],set:a||I.defaultSet,title:s,desc:u,html:d,transition:I.transition,minWidth:I.minWidth,minHeight:I.minHeight,maxWidth:I.maxWidth,maxHeight:I.maxHeight,borderWidth:I.borderWidth,padding:I.padding,passthrough:c||I.passthrough,onBeforeStep:I.onBeforeStep,onAfterStep:I.onAfterStep,onStep:I.onStep,uiGlide:n});return e},J=function(t){for(var e=0,n=t.length;n>e;e++)t.index=e,t.set||(t.set=I.defaultSet),t.transition||(t.transition=I.transition),t.minWidth||(t.minWidth=I.minWidth),t.minHeight||(t.minHeight=I.minHeight),t.maxWidth||(t.maxWidth=I.maxWidth),t.maxHeight||(t.maxHeight=I.maxHeight),(void 0===t.padding||null===t.padding)&&(t.padding=I.padding),(void 0===t.borderWidth||null===t.borderWidth)&&(t.borderWidth=I.borderWidth),(void 0===t.passthrough||null===t.passthrough)&&(t.passthrough=I.passthrough),t.onBeforeStep||(t.onBeforeStep=I.onBeforeStep),t.onAfterStep||(t.onAfterStep=I.onAfterStep),t.onStep||(t.onStep=I.onStep);return t},K=function(t){return t.sort(function(t,e){return t.set==e.set?0:+(t.set>e.set)||-1}),t},Z=function(t){return t.sort(function(t,e){return t.index==e.index?0:+(t.index>e.index)||-1}),t},$=function(e,n){for(var o=0,i=e.length;i>o;o++)n[o]&&(e[o]?e[o]=t.extend({},e[o],n[o]):e[o]=n[o]);for(var o=0,i=n.length;i>o;o++)!e[o]&&n[o]&&(e[o]=n[o]);return t.grep(e,function(t,e){return void 0!=t&&null!=t})},_=function(t){t.preventDefault(),D()},tt=function(t){t.preventDefault(),A()},et=function(t){t.preventDefault(),j()},nt=function(t){clearTimeout(p),p=setTimeout(function(){G(r)},250)},ot=function(){if(e&&(I=t.extend({},I,e),I.parent=I.parent||document.body,n.window=e.window||window,n.document=e.document||document),!I.parent||!I.parent.appendChild)throw new Error("uiGlide: Cannot append elements to the settings.parent element.");var o=q(),r=J(I.steps);i=$(o,r),i=K(i)};n.open=Q,n.close=j,n.next=A,n.prev=D,n["goto"]=G,n.stop=k,n.getFocusBox=function(){return f},n.getSettings=function(){return I},n.getSteps=function(){return a},n.getStep=function(t){return a[t]||null},n.getCurrentSet=function(){return a},n.getCurrentSetName=function(){return s},n.getCurrentStep=function(){return l},n.getCurrentStepIndex=function(){return r},n.getVersion=function(){return o},n.window=window,n.document=document,ot()}t.uiGlide=function(t){return new e(t)},t.fn.uiGlide=function(n){return n.parent=t(this)[0]||null,new e(n)}}(jQuery);