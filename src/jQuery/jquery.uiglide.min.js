/*!
 * uiGlide v1.0.0
 * http://uiglide.com
 *
 * Copyright WCP Digital and Patrick Purcell
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * Date: 2016-07-25
 */
"use strict";!function(t){function e(e){var n=this,o="1.0.0",i=[],r=0,l=null,a=[],s="",u=!1,c=!1,d=null,p=null,f=null,h=null,m=null,g=null,x=null,B=null,v=null,b=null,y=null,w=null,C=null,S=null,I=null,T={parent:document.body||null,steps:[],defaultSet:"uiGlide",resetScrollbars:!0,fadeIn:1e3,fadeOut:500,documentPadding:20,transition:500,padding:10,borderWidth:1,minWidth:180,minHeight:200,maxWidth:800,maxHeight:600,passthrough:!0,dataUISet:"data-uigset",dataUIStep:"data-uigstep",dataUITitle:"data-uigtitle",dataUIDesc:"data-uigdesc",dataUIHtml:"data-uightml",dataUIPassthrough:"data-uigpassthrough",cssLeftBox:"uig-box uig-box-left",cssRightBox:"uig-box uig-box-right",cssTopBox:"uig-box uig-box-top",cssBottomBox:"uig-box uig-box-bottom",cssFocusBox:"uig-focusbox",cssFocusBoxLeft:"uig-focusbox-left",cssFocusBoxRight:"uig-focusbox-right",cssFocusBoxTop:"uig-focusbox-top",cssFocusBoxBottom:"uig-focusbox-bottom",cssFocusContent:"uig-focus-content",cssTitleBox:"uig-titlebox",cssDescBox:"uig-descbox",cssControlsBox:"uig-controlsbox",cssPrevBtn:"uig-btn uig-btn-prev",cssNextBtn:"uig-btn uig-btn-next",cssCloseBtn:"uig-btn uig-btn-close",htmlPrevBtn:'<a href="javascript:void(0)">&lt;</a>',htmlNextBtn:'<a href="javascript:void(0)">&gt;</a>',htmlCloseBtn:'<a href="javascript:void(0)">&#10006;</a>',htmlFocusContent:"",htmlControlsContent:"",onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,onBeforeGoto:null,onAfterGoto:null,onBeforeStep:null,onAfterStep:null,onStep:null},E=function(){return"ontouchstart"in window||navigator.maxTouchPoints},H=function(t,e,n){return t+n*(e-t)},W=function(t,e){t.style.opacity=e;var n=100*e;t.style.filter="alpha(opacity="+n+")"},M=function(t,e,n){var o=60,i=0,r=Date.now(),l=1e3/o,a=e,s=0,u=0,c=setInterval(function(){return s=u/a,s>=1?(t(1),clearInterval(c),n&&n()):(t(s),i=Math.floor(1/(.001*(Date.now()-r))),r=Date.now(),void(u+=l*(o/i)))},l);return c},F=function(t){var e=n.document,o=n.window,i=0,r=0;return t!==e.body&&t!==e.documentElement?(i=t.scrollLeft,r=t.scrollTop):(i=o.scrollX||o.pageXOffset||e.documentElement.scrollLeft,r=o.scrollY||o.pageYOffset||e.documentElement.scrollTop),{left:i,top:r}},N=function(){var t=n.document.body,e=n.document.documentElement,o=Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth),i=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);return{width:o,height:i,left:0,top:0}},L=function(t){var e=n.document,o=n.window,i=t.getBoundingClientRect(),r=i.left+(o.scrollX||o.pageXOffset||e.documentElement.scrollLeft),l=i.top+(o.scrollY||o.pageYOffset||e.documentElement.scrollTop),a=i.right-i.left,s=i.bottom-i.top,u=r+.5*a,c=l+.5*s;return{left:r,top:l,width:a,height:s,center:{left:u,top:c}}},A=function(t,e){var o=n.document;n.window;if(e==o.body||e==o.documentElement)return L(t);var i=F(e),r=e.getBoundingClientRect(),l=t.getBoundingClientRect(),a=l.left-r.left+i.left,s=l.top-r.top+i.top,u=l.right-l.left,c=l.bottom-l.top,d=a+.5*u,p=s+.5*c;return{left:a,top:s,width:u,height:c,center:{left:d,top:p}}},D=function(){var t=n.document.createElement("DIV");return t.style.position="absolute",t.style.display="block",t.style.width="0px",t.style.height="0px",t.style.left="0px",t.style.top="0px",t},G=function(){k(r+1)},P=function(){k(r-1)},k=function(t){if(T&&T.onBeforeGoto&&T.onBeforeGoto(n),d&&U(),(isNaN(t)||void 0===a[t])&&(t=0),l&&l.onAfterStep&&l.onAfterStep(n),l=a[t]||null,r=t,!l||!l.element)throw new Error("uiGlide: Step not found: Set: "+a+", Index: "+r);l&&l.onBeforeStep&&l.onBeforeStep(n),l&&l.title?(g.style.display="block",g.innerHTML=l.title):g.style.display="none",l&&l.desc?(x.style.display="block",x.innerHTML=l.desc):x.style.display="none",l.passthrough?(h.style.pointerEvents="none",B.style.pointerEvents="none",v.style.pointerEvents="auto",b.style.pointerEvents="auto",y.style.pointerEvents="auto"):(h.style.pointerEvents="auto",B.style.pointerEvents="auto"),m.innerHTML=l.html,h.style.borderWidth=l.borderWidth+"px",0>=t?v.style.display="none":v.style.display="block",t>=a.length-1?b.style.display="none":b.style.display="block";var e=A(h,T.parent),o=(parseInt(h.style.width,10),parseInt(h.style.height,10),parseInt(h.style.left,10),parseInt(h.style.top,10),F(T.parent));return j(l),d=M(function(t){var n=A(l.element,T.parent),i=2*l.padding,r=2*l.borderWidth,a=Math.max(n.width+i-r,l.minWidth),s=Math.max(n.height+i-r,l.minHeight);a=Math.min(a+i-r,l.maxWidth),s=Math.min(s+i-r,l.maxHeight);var u=n.center.left-.5*a,c=n.center.top-.5*s,d=N(),p={left:d.left+T.documentPadding,right:d.left+d.width-T.documentPadding,top:d.top+T.documentPadding,bottom:d.top+d.height-T.documentPadding};p.left>u&&(u+=p.left-u),p.right<u+a&&(a-=u+a-p.right),p.top>c&&(c+=p.top-c),p.bottom<c+s&&(s-=c+s-p.bottom);var f=H(e.left,u,t),h=H(e.top,c,t),m=H(e.width,a,t),g=H(e.height,s,t);R(f,h,m,g);var x=u-T.documentPadding,B=c-T.documentPadding,v=H(o.left,x,t),b=H(o.top,B,t);O(v-T.documentPadding,b-T.documentPadding)},l.transition,function(){U(),Y(l),l&&l.onStep&&l.onStep(n),T&&T.onAfterGoto&&T.onAfterGoto(n)}),n},U=function(){return clearInterval(d),d=null,n},O=function(t,e){var o=n.document;T.parent&&T.parent!==o.body&&T.parent!==o.documentElement?(T.parent.scrollLeft=t,T.parent.scrollTop=e):(o.documentElement.scrollLeft=o.body.scrollLeft=t,o.documentElement.scrollTop=o.body.scrollTop=e)},V=function(t,e,n,o,i,r,l){t.style.width=e,t.style.height=n,t.style.left=o,t.style.top=i,t.style.right=r,t.style.bottom=l},R=function(t,e,n,o){var i=n,r=o,l=t,a=e,s=N();V(h,Math.max(i,0)+"px",Math.max(r,0)+"px",l+"px",a+"px","auto","auto"),V(B,Math.max(i,0)+"px",Math.max(r,0)+"px",l+"px",a+"px","auto","auto"),V(w,Math.max(l,0)+"px",Math.max(s.height,0)+"px","0px","0px","auto","auto"),V(C,"auto",Math.max(s.height,0)+"px",l+i+"px","0px","0px","auto"),V(S,Math.max(i,0)+"px",Math.max(a,0)+"px",l+"px","0px","auto","auto"),V(I,Math.max(i,0)+"px",Math.max(s.height-(a+r),0)+"px",l+"px",a+r+"px","auto","auto")},Y=function(e){var n=A(h,T.parent),o=N(),i=n.top-o.top,r=o.top+o.height-(n.top+n.height),l=n.left-o.left,a=o.left+o.width-(n.left+n.width),s="";s=r>=i?e.cssFocusBoxTop||T.cssFocusBoxTop:e.cssFocusBoxTop||T.cssFocusBoxBottom,t(h).addClass(s),s=a>=l?e.cssFocusBoxTop||T.cssFocusBoxLeft:e.cssFocusBoxTop||T.cssFocusBoxRight,t(h).addClass(s)},j=function(t){h.className=t.cssFocusBox||T.cssFocusBox},z=function(){if(t(n.window).off("orientationchange",it),t(n.window).off("resize",it),t(T.parent).off("orientationchange",it),t(T.parent).off("resize",it),t(v).off("click",et),t(v).off("touchstart",et),t(b).off("click",nt),t(b).off("touchstart",nt),t(y).off("click",ot),t(y).off("touchstart",ot),!E())for(var e=[w,C,S,I],o=0,i=e.length;i>o;o++)t(e[o]).off("click",ot),t(e[o]).off("touchstart",ot);for(var r=[y,b,v,x,g,h,B,w,C,S,I],o=r.length-1;o>=0;o--)t(r[o]).remove(),r[o]=null;T&&T.onAfterClose&&T.onAfterClose(n),c=!1},X=function(){if(u)throw new Error("uiGlide: Tried to close before completing the opening.");c=!0,T&&T.onBeforeClose&&T.onBeforeClose(n),d&&U();var t=[h,B,w,C,S,I],e=F(T.parent);return M(function(n){if(T.resetScrollbars){var o=H(e.left,f.left,n),i=H(e.top,f.top,n);O(o,i)}n=1-n;for(var r=t.length-1;r>=0;r--)W(t[r],n)},T.fadeOut,z),n},Q=function(t){s=t||i[0].set||T.defaultSet,a=[];for(var e=0,n=i.length;n>e;e++)i[e].set==s&&a.push(i[e]);if(0==a.length)throw new Error("uiGlide: This set is empty or doesn't exist.");return _(a)},q=function(){if(h=D(),T.parent.appendChild(h),m=n.document.createElement("DIV"),m.innerHTML=T.htmlFocusContent,m.className=T.cssFocusContent,h.appendChild(m),g=n.document.createElement("DIV"),g.className=T.cssTitleBox,h.appendChild(g),x=n.document.createElement("DIV"),x.className=T.cssDescBox,h.appendChild(x),B=D(),B.innerHTML=T.htmlControlsContent,B.className=T.cssControlsBox,T.parent.appendChild(B),v=n.document.createElement("DIV"),v.className=T.cssPrevBtn,v.innerHTML=T.htmlPrevBtn,B.appendChild(v),b=n.document.createElement("DIV"),b.className=T.cssNextBtn,b.innerHTML=T.htmlNextBtn,B.appendChild(b),y=n.document.createElement("DIV"),y.className=T.cssCloseBtn,y.innerHTML=T.htmlCloseBtn,B.appendChild(y),t(v).on("click",et),t(v).on("touchstart",et),t(b).on("click",nt),t(b).on("touchstart",nt),t(y).on("click",ot),t(y).on("touchstart",ot),w=D(),w.className=T.cssLeftBox,T.parent.appendChild(w),C=D(),C.className=T.cssRightBox,T.parent.appendChild(C),S=D(),S.className=T.cssTopBox,T.parent.appendChild(S),I=D(),I.className=T.cssBottomBox,T.parent.appendChild(I),!E())for(var e=[w,C,S,I],o=0,i=e.length;i>o;o++)t(e[o]).on("click",ot),t(e[o]).on("touchstart",ot);t(T.parent).on("orientationchange",it),t(T.parent).on("resize",it),t(n.window).on("orientationchange",it),t(n.window).on("resize",it);var r=N(),l=200,a=200,s=.5*r.width-l,u=100;R(s,u,l,a)},J=function(t,e){if(c)throw new Error("uiGlide: Tried to open before completing the close.");if(h)throw new Error("uiGlide: You can only open one glide at a time.");u=!0,T&&T.onBeforeOpen&&T.onBeforeOpen(n),f=F(T.parent),q(),M(function(t){W(h,t),W(B,t)},T.fadeIn);var o=[w,C,S,I];return M(function(t){for(var e=o.length-1;e>=0;e--)W(o[e],t)},1.5*T.fadeIn),T&&T.onAfterOpen&&T.onAfterOpen(n),Q(e),u=!1,k(t)},K=function(){for(var e=[],o=t("["+T.dataUIStep+"]",T.parent),i=0,r=o.length,l=0,a=null,s="",u="",c="",d=null;r>i;i++)l=parseInt(t(o[i]).attr(T.dataUIStep),10),a=t(o[i]).attr(T.dataUISet),s=t(o[i]).attr(T.dataUITitle),u=t(o[i]).attr(T.dataUIDesc),c=t(o[i]).attr(T.dataUIHtml),d=t(o[i]).attr(T.dataUIPassthrough),e.push({index:l,element:o[i],title:s,desc:u,transition:T.transition,minWidth:T.minWidth,minHeight:T.minHeight,maxWidth:T.maxWidth,maxHeight:T.maxHeight,borderWidth:T.borderWidth,padding:T.padding,onBeforeStep:T.onBeforeStep,onAfterStep:T.onAfterStep,onStep:T.onStep,set:a||T.defaultSet,html:c||T.htmlFocusContent,passthrough:d||T.passthrough,uiGlide:n});return e},Z=function(t){for(var e=0,n=t.length;n>e;e++)t.index=e,t.set||(t.set=T.defaultSet),t.html||(t.html=T.htmlFocusContent),t.transition||(t.transition=T.transition),t.minWidth||(t.minWidth=T.minWidth),t.minHeight||(t.minHeight=T.minHeight),t.maxWidth||(t.maxWidth=T.maxWidth),t.maxHeight||(t.maxHeight=T.maxHeight),(void 0===t.padding||null===t.padding)&&(t.padding=T.padding),(void 0===t.borderWidth||null===t.borderWidth)&&(t.borderWidth=T.borderWidth),(void 0===t.passthrough||null===t.passthrough)&&(t.passthrough=T.passthrough),t.onBeforeStep||(t.onBeforeStep=T.onBeforeStep),t.onAfterStep||(t.onAfterStep=T.onAfterStep),t.onStep||(t.onStep=T.onStep);return t},$=function(t){return t.sort(function(t,e){return t.set==e.set?0:+(t.set>e.set)||-1}),t},_=function(t){return t.sort(function(t,e){return t.index==e.index?0:+(t.index>e.index)||-1}),t},tt=function(e,n){for(var o=0,i=e.length;i>o;o++)n[o]&&(e[o]?e[o]=t.extend({},e[o],n[o]):e[o]=n[o]);for(var o=0,i=n.length;i>o;o++)!e[o]&&n[o]&&(e[o]=n[o]);return t.grep(e,function(t,e){return void 0!=t&&null!=t})},et=function(t){t.preventDefault(),P()},nt=function(t){t.preventDefault(),G()},ot=function(t){t.preventDefault(),X()},it=function(t){clearTimeout(p),p=setTimeout(function(){k(r)},250)},rt=function(){if(e&&(T=t.extend({},T,e),T.parent=T.parent||document.body,n.window=e.window||window,n.document=e.document||document),!T.parent||!T.parent.appendChild)throw new Error("uiGlide: Cannot append elements to the settings.parent element.");var o=K(),r=Z(T.steps);i=tt(o,r),i=$(i)};n.open=J,n.close=X,n.next=G,n.prev=P,n["goto"]=k,n.stop=U,n.getFocusBox=function(){return h},n.getSettings=function(){return T},n.getSteps=function(){return a},n.getStep=function(t){return a[t]||null},n.getCurrentSet=function(){return a},n.getCurrentSetName=function(){return s},n.getCurrentStep=function(){return l},n.getCurrentStepIndex=function(){return r},n.getVersion=function(){return o},n.window=window,n.document=document,rt()}t.uiGlide=function(t){return new e(t)},t.fn.uiGlide=function(n){return n.parent=t(this)[0]||null,new e(n)}}(jQuery);