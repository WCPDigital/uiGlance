/*!
 * uiGlide v1.0.0
 * http://uiglide.com
 *
 * Copyright WCP Digital and Patrick Purcell
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * Date: 2016-07-25
 */
"use strict";function uiGlide(t){var e=this,n="1.0.0",o=[],r=0,l=null,i=[],a="",s=!1,u=!1,c=null,d=null,p=null,h=null,f=null,m=null,g=null,v=null,x=null,y=null,E=null,w=null,B=null,b={parent:document.body||null,steps:[],defaultSet:"uiGlide",transition:500,fadeIn:1e3,fadeOut:500,minWidth:220,minHeight:125,padding:10,borderWidth:2,documentPadding:20,passthrough:!0,dataUISet:"data-uigset",dataUIStep:"data-uigstep",dataUITitle:"data-uigtitle",dataUIDesc:"data-uigdesc",dataUIHtml:"data-uightml",dataUIPassthrough:"data-uigpassthrough",cssLeftBox:"uig-box uig-box-left",cssRightBox:"uig-box uig-box-right",cssTopBox:"uig-box uig-box-top",cssBottomBox:"uig-box uig-box-bottom",cssFocusBox:"uig-focusbox",cssFocusBoxLeft:"uig-focusbox-left",cssFocusBoxRight:"uig-focusbox-right",cssFocusBoxTop:"uig-focusbox-top",cssFocusBoxBottom:"uig-focusbox-bottom",cssFocusContent:"uig-focus-content",cssTitleBox:"uig-titlebox",cssDescBox:"uig-descbox",cssPrevBtn:"uig-btn uig-btn-prev",cssNextBtn:"uig-btn uig-btn-next",cssCloseBtn:"uig-btn uig-btn-close",htmlPrevBtn:'<a href="javascript:void(0)">&lt;</a>',htmlNextBtn:'<a href="javascript:void(0)">&gt;</a>',htmlCloseBtn:'<a href="javascript:void(0)">&#10006;</a>',htmlFocusContent:"<div></div>",onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,onBeforeGoto:null,onAfterGoto:null,onBeforeStep:null,onAfterStep:null,onStep:null},C=function(){return"ontouchstart"in window||navigator.maxTouchPoints},S=function(t,e,n){return t+n*(e-t)},T=function(t,e){t.style.opacity=e;var n=100*e;t.style.filter="alpha(opacity="+n+")"},A=function(t,e,n){var o=60,r=0,l=Date.now(),i=1e3/o,a=e,s=0,u=0,c=setInterval(function(){return s=u/a,s>=1?(t(1),clearInterval(c),n&&n()):(t(s),r=Math.floor(1/(.001*(Date.now()-l))),l=Date.now(),void(u+=i*(o/r)))},i);return c},I=function(t){var n=e.document,o=e.window,r=0,l=0;return t!==n.body&&t!==n.documentElement?(r=t.scrollLeft,l=t.scrollTop):(r=o.scrollX||o.pageXOffset||n.documentElement.scrollLeft,l=o.scrollY||o.pageYOffset||n.documentElement.scrollTop),{left:r,top:l}},G=function(){var t=e.document.body,n=e.document.documentElement,o=Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),r=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);return{width:o,height:r,left:0,top:0}},F=function(t){var n=e.document,o=e.window,r=t.getBoundingClientRect(),l=r.left+(o.scrollX||o.pageXOffset||n.documentElement.scrollLeft),i=r.top+(o.scrollY||o.pageYOffset||n.documentElement.scrollTop),a=r.right-r.left,s=r.bottom-r.top,u=l+.5*a,c=i+.5*s;return{left:l,top:i,width:a,height:s,center:{left:u,top:c}}},L=function(t,n){var o=e.document;e.window;if(n==o.body||n==o.documentElement)return F(t);var r=I(n),l=n.getBoundingClientRect(),i=t.getBoundingClientRect(),a=i.left-l.left+r.left,s=i.top-l.top+r.top,u=i.right-i.left,c=i.bottom-i.top,d=a+.5*u,p=s+.5*c;return{left:a,top:s,width:u,height:c,center:{left:d,top:p}}},N=function(){var t=e.document.createElement("DIV");return t.style.position="absolute",t.style.display="block",t.style.width="0px",t.style.height="0px",t.style.left="0px",t.style.top="0px",t},M=function(){P(r+1)},D=function(){P(r-1)},P=function(t){var n=e.document;e.window;if(b&&b.onBeforeGoto&&b.onBeforeGoto(e),c&&k(),(isNaN(t)||void 0===i[t])&&(t=0),l&&l.onAfterStep&&l.onAfterStep(e),l=i[t]||null,r=t,!l||!l.element)throw new Error("uiGlide: Step not found: Set: "+i+", Index: "+r);l&&l.onBeforeStep&&l.onBeforeStep(e),l&&l.title?(f.style.display="block",f.innerHTML=l.title):f.style.display="none",l&&l.desc?(m.style.display="block",m.innerHTML=l.desc):m.style.display="none",l&&l.html?(h.style.display="block",h.innerHTML=l.html):h.style.display="none",l.passthrough?(p.style.pointerEvents="none",g.style.pointerEvents="auto",v.style.pointerEvents="auto",x.style.pointerEvents="auto"):p.style.pointerEvents="auto",0>=t?g.style.display="none":g.style.display="block",t>=i.length-1?v.style.display="none":v.style.display="block";var o=L(p,b.parent),a=(parseInt(p.style.width,10),parseInt(p.style.height,10),parseInt(p.style.left,10),parseInt(p.style.top,10),I(b.parent));return W(),c=A(function(t){var e=l.element.offsetLeft-b.documentPadding,r=l.element.offsetTop-b.documentPadding,i=S(a.left,e,t),s=S(a.top,r,t);b.parent&&b.parent!=n.body&&b.parent!=n.documentElement?(b.parent.scrollLeft=i,b.parent.scrollTop=s):(n.body.scrollLeft=i,n.body.scrollTop=s,n.documentElement.scrollLeft=i,n.documentElement.scrollTop=s);var u=L(l.element,b.parent),c=Math.max(u.width,b.minWidth)+2*b.padding,d=Math.max(u.height,b.minHeight)+2*b.padding,p=u.center.left-.5*c,h=u.center.top-.5*d,f=G(),m=f.left+b.documentPadding,g=f.left+f.width-b.documentPadding,v=f.top+b.documentPadding,x=f.top+f.height-b.documentPadding;m>p?p=m:p+c>g&&(p-=p+c-g),v>h?h=v:h+d>x&&(h-=h+d-x);var y=S(o.width,c,t),E=S(o.height,d,t),w=S(o.left,p,t),B=S(o.top,h,t);O(w,B,y,E)},b.transition,function(){k(),U(),l&&l.onStep&&l.onStep(e),b&&b.onAfterGoto&&b.onAfterGoto(e)}),e},k=function(){return clearInterval(c),c=null,e},H=function(t,e,n,o,r,l,i){t.style.width=e,t.style.height=n,t.style.left=o,t.style.top=r,t.style.right=l,t.style.bottom=i},O=function(t,e,n,o){var r=n,l=o,i=t,a=e,s=G();H(p,Math.max(r-2*b.borderWidth,0)+"px",Math.max(l-2*b.borderWidth,0)+"px",i+"px",a+"px","auto","auto"),p.style.borderWidth=b.borderWidth+"px",H(y,Math.max(i,0)+"px",Math.max(s.height,0)+"px","0px","0px","auto","auto"),H(E,"auto",Math.max(s.height,0)+"px",i+r+"px","0px","0px","auto"),H(w,Math.max(r,0)+"px",Math.max(a,0)+"px",i+"px","0px","auto","auto"),H(B,Math.max(r,0)+"px",Math.max(s.height-(a+l),0)+"px",i+"px",a+l+"px","auto","auto")},U=function(){var t=L(p,b.parent),n=G(),o=t.top-n.top,r=n.top+n.height-(t.top+t.height),l=t.left-n.left,i=n.left+n.width-(t.left+t.width);r>=o?e.addClass(p,b.cssFocusBoxTop):e.addClass(p,b.cssFocusBoxBottom),i>=l?e.addClass(p,b.cssFocusBoxLeft):e.addClass(p,b.cssFocusBoxRight)},W=function(){for(var t=[b.cssFocusBoxLeft,b.cssFocusBoxRight,b.cssFocusBoxTop,b.cssFocusBoxBottom],n=0,o=t.length;o>n;n++)e.removeClass(p,t[n])},R=function(){if(e.removeEvent(e.window,"orientationchange",tt),e.removeEvent(e.window,"resize",tt),e.removeEvent(b.parent,"orientationchange",tt),e.removeEvent(b.parent,"resize",tt),e.removeEvent(g,"click",Q),e.removeEvent(g,"touchstart",Q),e.removeEvent(v,"click",Z),e.removeEvent(v,"touchstart",Z),e.removeEvent(x,"click",_),e.removeEvent(x,"touchstart",_),!C())for(var t=[y,E,w,B],n=0,o=t.length;o>n;n++)e.removeEvent(t[n],"click",_),e.removeEvent(t[n],"touchstart",_);for(var r=[x,v,g,m,f,p,y,E,w,B],n=r.length-1;n>=0;n--)e.removeElement(r[n]),r[n]=null;b&&b.onAfterClose&&b.onAfterClose(e),u=!1},V=function(){if(s)throw new Error("uiGlide: Tried to close before completing the opening.");u=!0,b&&b.onBeforeClose&&b.onBeforeClose(e),c&&k();var t=[p,y,E,w,B];return A(function(e){e=1-e;for(var n=t.length-1;n>=0;n--)T(t[n],e)},b.fadeOut,R),e},Y=function(t){a=t||o[0].set||b.defaultSet,i=[];for(var e=0,n=o.length;n>e;e++)o[e].set==a&&i.push(o[e]);if(0==i.length)throw new Error("uiGlide: This set is empty or doesn't exist.");return J(i)},X=function(){if(p=N(),p.className=b.cssFocusBox,b.parent.appendChild(p),h=e.document.createElement("DIV"),h.innerHTML=b.htmlFocusContent,h.className=b.cssFocusContent,p.appendChild(h),f=e.document.createElement("DIV"),f.className=b.cssTitleBox,p.appendChild(f),m=e.document.createElement("DIV"),m.className=b.cssDescBox,p.appendChild(m),g=e.document.createElement("DIV"),g.className=b.cssPrevBtn,g.innerHTML=b.htmlPrevBtn,p.appendChild(g),v=e.document.createElement("DIV"),v.className=b.cssNextBtn,v.innerHTML=b.htmlNextBtn,p.appendChild(v),x=e.document.createElement("DIV"),x.className=b.cssCloseBtn,x.innerHTML=b.htmlCloseBtn,p.appendChild(x),e.addEvent(g,"click",Q),e.addEvent(g,"touchstart",Q),e.addEvent(v,"click",Z),e.addEvent(v,"touchstart",Z),e.addEvent(x,"click",_),e.addEvent(x,"touchstart",_),y=N(),y.className=b.cssLeftBox,b.parent.appendChild(y),E=N(),E.className=b.cssRightBox,b.parent.appendChild(E),w=N(),w.className=b.cssTopBox,b.parent.appendChild(w),B=N(),B.className=b.cssBottomBox,b.parent.appendChild(B),!C())for(var t=[y,E,w,B],n=0,o=t.length;o>n;n++)e.addEvent(t[n],"click",_),e.addEvent(t[n],"touchstart",_);e.addEvent(b.parent,"orientationchange",tt),e.addEvent(b.parent,"resize",tt),e.addEvent(e.window,"orientationchange",tt),e.addEvent(e.window,"resize",tt);var r=G(),l=200,i=200,a=.5*r.width-l,s=100;O(a,s,l,i)},z=function(t,n){if(u)throw new Error("uiGlide: Tried to open before completing the close.");if(p)throw new Error("uiGlide: You can only open one glide at a time.");s=!0,b&&b.onBeforeOpen&&b.onBeforeOpen(e),X(),A(function(t){T(p,t)},b.fadeIn);var o=[y,E,w,B];return A(function(t){for(var e=o.length-1;e>=0;e--)T(o[e],t)},1.5*b.fadeIn),b&&b.onAfterOpen&&b.onAfterOpen(e),Y(t),s=!1,P(n)},j=function(){for(var t=[],n=e.getElementByAttr(b.dataUIStep,b.parent),o=0,r=n.length,l=0,i=null,a="",s="",u="",c=null;r>o;o++)l=parseInt(e.getAttr(n[o],b.dataUIStep),10),i=e.getAttr(n[o],b.dataUISet),a=e.getAttr(n[o],b.dataUITitle),s=e.getAttr(n[o],b.dataUIDesc),u=e.getAttr(n[o],b.dataUIHtml),c=e.getAttr(n[o],b.dataUIPassthrough),t.push({index:l,element:n[o],set:i||b.defaultSet,title:a,desc:s,html:u,passthrough:c||b.passthrough,onBeforeStep:b.onBeforeStep,onAfterStep:b.onAfterStep,onStep:b.onStep,uiGlide:e});return t},$=function(t){for(var e=0,n=t.length;n>e;e++)t.index=e,t.set||(t.set=b.defaultSet),(void 0===t.passthrough||null===t.passthrough)&&(t.passthrough=b.passthrough),t.onBeforeStep||(t.onBeforeStep=b.onBeforeStep),t.onAfterStep||(t.onAfterStep=b.onAfterStep),t.onStep||(t.onStep=b.onStep);return t},q=function(t){return t.sort(function(t,e){return t.set==e.set?0:+(t.set>e.set)||-1}),t},J=function(t){return t.sort(function(t,e){return t.index==e.index?0:+(t.index>e.index)||-1}),t},K=function(t,n){for(var o=0,r=t.length;r>o;o++)n[o]&&(t[o]?t[o]=e.wash(t[o],n[o]):t[o]=n[o]);for(var o=0,r=n.length;r>o;o++)!t[o]&&n[o]&&(t[o]=n[o]);return e.arrayClean(t)},Q=function(t){var n=e.normaliseEvent(t);n.preventDefault(),D()},Z=function(t){var n=e.normaliseEvent(t);n.preventDefault(),M()},_=function(t){var n=e.normaliseEvent(t);n.preventDefault(),V()},tt=function(t){clearTimeout(d),d=setTimeout(function(){P(r)},250)},et=function(){if(t&&(b=e.wash(b,t),b.parent=b.parent||document.body,e.window=t.window||window,e.document=t.document||document),!b.parent||!b.parent.appendChild)throw new Error("uiGlide: Cannot append elements to the settings.parent element.");var n=j(),r=$(b.steps);o=K(n,r),o=q(o)};e.open=z,e.close=V,e.next=M,e.prev=D,e["goto"]=P,e.stop=k,e.getFocusBox=function(){return p},e.getSettings=function(){return b},e.getSteps=function(){return i},e.getStep=function(t){return i[t]||null},e.getCurrentSet=function(){return i},e.getCurrentSetName=function(){return a},e.getCurrentStep=function(){return l},e.getCurrentStepIndex=function(){return r},e.getVersion=function(){return n},e.window=window,e.document=document,et()}uiGlide.prototype.constructor=uiGlide,uiGlide.prototype.arrayClean=function(t){for(var e=[],n=0,o=t.length;o>n;n++)t[n]&&e.push(t[n]);return e},uiGlide.prototype.wash=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n]=e[n]);return t},uiGlide.prototype.removeElement=function(t){return t&&t.parentElement&&t.parentElement.removeChild(t),t=null},uiGlide.prototype.hasClass=function(t,e){return t&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},uiGlide.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},uiGlide.prototype.removeClass=function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").trim()}},uiGlide.prototype.getElementByAttr=function(t,e,n){e=e||this.document;var o="["+t+"]",r=e.querySelectorAll&&e.querySelectorAll(o)||null;if(!r)for(var l=null,i=0,r=[],a=e.getElementsByTagName("*");l=a[i++];){var s=this.getAttr(l,t);s&&r.push(l)}return n?r[0]||null:r},uiGlide.prototype.getAttr=function(t,e){var n=t.getAttribute&&t.getAttribute(e)||null;if(!n)for(var o=t.attributes||[],r=o.length,l=0;r>l;l++)o[l].nodeName===e&&(n=o[l].nodeValue);return n},uiGlide.prototype.addEvent=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n),t},uiGlide.prototype.removeEvent=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n),t},uiGlide.prototype.normaliseEvent=function(t){if(t=t||this.window.event){var e=t.type,n=t.currentTarget||t.srcElement,o=function(){t.preventDefault?t.preventDefault():t.returnValue=!1},r=function(){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},l=t.touches,i=t.which||{};null!=t.which||null==t.charCode&&null==t.keyCode||(i=null!=t.charCode?t.charCode:t.keyCode);var a=t.which||{};null==t.which&&void 0!==t.button&&(a=1&t.button?1:2&t.button?3:4&t.button?2:0),null!=l&&(a=l.length>1?3:1);var s=this.window.scrollX||this.window.pageXOffset||this.document.documentElement.scrollLeft,u=this.window.scrollY||this.window.pageYOffset||this.document.documentElement.scrollTop,c=0,d=0;return t.changedTouches?(c=t.changedTouches[0].clientX||0,d=t.changedTouches[0].clientY||0):(c=t.clientX||t.pageX||0,d=t.clientY||t.pageY||0),c+=s,d+=u,{event:t,element:n,type:e,key:i,which:a,touches:l,top:d,left:c,preventDefault:o,stopPropagation:r}}return null},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});