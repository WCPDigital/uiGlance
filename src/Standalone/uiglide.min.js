/*!
 * uiGlide v1.0.0
 * http://uiglide.com
 *
 * Copyright WCP Digital and Patrick Purcell
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * Date: 2016-07-25
 */
"use strict";function uiGlide(t){var e=this,n="1.0.0",o=[],l=0,r=null,s=[],i="",a=!1,u=null,c=null,d=null,p=null,h=null,f=null,m=null,g=null,v=null,y=null,x=null,w=null,E={parent:document.body||null,steps:[],defaultSet:"uiGlide",transition:500,fadeIn:1e3,fadeOut:500,minWidth:260,minHeight:125,padding:10,borderWidth:2,documentPadding:20,passthrough:!0,dataUISet:"data-uigset",dataUIStep:"data-uigstep",dataUITitle:"data-uigtitle",dataUIDesc:"data-uigdesc",dataUIHtml:"data-uightml",dataUIPassthrough:"data-uigpassthrough",cssLeftBox:"uig-box uig-box-left",cssRightBox:"uig-box uig-box-right",cssTopBox:"uig-box uig-box-top",cssBottomBox:"uig-box uig-box-bottom",cssFocusBox:"uig-focusbox",cssFocusBoxLeft:"uig-focusbox-left",cssFocusBoxRight:"uig-focusbox-right",cssFocusBoxTop:"uig-focusbox-top",cssFocusBoxBottom:"uig-focusbox-bottom",cssFocusContent:"uig-focus-content",cssTitleBox:"uig-titlebox",cssDescBox:"uig-descbox",cssPrevBtn:"uig-btn uig-btn-prev",cssNextBtn:"uig-btn uig-btn-next",cssCloseBtn:"uig-btn uig-btn-close",htmlPrevBtn:'<a href="javascript:void(0)">&lt;</a>',htmlNextBtn:'<a href="javascript:void(0)">&gt;</a>',htmlCloseBtn:'<a href="javascript:void(0)">&#10006;</a>',htmlFocusContent:"<div></div>",onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,onBeforeGoto:null,onAfterGoto:null,onBeforeStep:null,onAfterStep:null,onStep:null},B=function(){return"ontouchstart"in window||navigator.maxTouchPoints},b=function(t,e,n){return t+n*(e-t)},C=function(t,e){t.style.opacity=e;var n=100*e;t.style.filter="alpha(opacity="+n+")"},S=function(t,n,o,l){var r=e.document;l=l||0;var s=T(t),i=(n||0)-s.left,a=(o||0)-s.top;A(function(e){t&&t!=r.body&&t!=r.documentElement?(t.scrollLeft=s.left+i*e,t.scrollTop=s.top+a*e):(r.body.scrollLeft=s.left+i*e,r.body.scrollTop=s.top+a*e,r.documentElement.scrollLeft=s.left+i*e,r.documentElement.scrollTop=s.top+a*e)},l)},A=function(t,e,n){var o=60,l=0,r=Date.now(),s=1e3/o,i=e,a=0,u=0,c=setInterval(function(){return a=u/i,a>=1?(t(1),clearInterval(c),n&&n()):(t(a),l=Math.floor(1/(.001*(Date.now()-r))),r=Date.now(),void(u+=s*(o/l)))},s)},T=function(t){var n=0,o=0;return t&&t!==e.document.body&&t!==e.document.documentElement?(n=t.scrollLeft,o=t.scrollTop):(n=e.window.scrollX||e.window.pageXOffset||e.document.documentElement.scrollLeft,o=e.window.scrollY||e.window.pageYOffset||e.document.documentElement.scrollTop),{left:n,top:o}},I=function(){var t=e.document.body,n=e.document.documentElement,o=Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),l=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);return{width:o,height:l,left:0,top:0}},F=function(t){var n=t.getBoundingClientRect(),o=n.left+(e.window.scrollX||e.window.pageXOffset||e.document.documentElement.scrollLeft),l=n.top+(e.window.scrollY||e.window.pageYOffset||e.document.documentElement.scrollTop),r=n.right-n.left,s=n.bottom-n.top,i=o+.5*r,a=l+.5*s;return{left:o,top:l,width:r,height:s,center:{left:i,top:a}}},G=function(){var t=e.document.createElement("DIV");return t.style.position="absolute",t.style.display="block",t.style.width="0px",t.style.height="0px",t.style.left="0px",t.style.top="0px",t},L=function(){M(l+1)},N=function(){M(l-1)},M=function(t){if(E&&E.onBeforeGoto&&E.onBeforeGoto(e),!a){if(a=!0,(isNaN(t)||void 0===s[t])&&(t=0),r&&r.onAfterStep&&r.onAfterStep(e),r=s[t]||null,l=t,!r||!r.element)throw new Error("uiGlide: Step not found: Set: "+s+", Index: "+l);r&&r.onBeforeStep&&r.onBeforeStep(e),r&&r.title?(p.style.display="block",p.innerHTML=r.title):p.style.display="none",r&&r.desc?(h.style.display="block",h.innerHTML=r.desc):h.style.display="none",r&&r.html?(d.style.display="block",d.innerHTML=r.html):d.style.display="none",r.passthrough?(c.style.pointerEvents="none",f.style.pointerEvents="auto",m.style.pointerEvents="auto",g.style.pointerEvents="auto"):c.style.pointerEvents="auto",0>=t?f.style.display="none":f.style.display="block",t>=s.length-1?m.style.display="none":m.style.display="block";var n=parseInt(c.style.width,10),o=parseInt(c.style.height,10),i=parseInt(c.style.left,10),u=parseInt(c.style.top,10);k(),A(function(t){var e=F(r.element),l=Math.max(e.width,E.minWidth)+2*E.padding,s=Math.max(e.height,E.minHeight)+2*E.padding,a=e.center.left-.5*l,c=e.center.top-.5*s,d=I(),p=d.left+E.documentPadding,h=d.left+d.width-E.documentPadding,f=d.top+E.documentPadding,m=d.top+d.height-E.documentPadding;p>a?a=p:a+l>h&&(a-=a+l-h),f>c?c=f:c+s>m&&(c-=c+s-m);var g=b(n,l,t),v=b(o,s,t),y=b(i,a,t),x=b(u,c,t);D(y,x,g,v)},E.transition,function(){a=!1,P(),r&&r.onStep&&r.onStep(e),E&&E.onAfterGoto&&E.onAfterGoto(e)}),S(E.parent,r.element.offsetLeft-E.documentPadding,r.element.offsetTop-E.documentPadding,E.transition)}},D=function(t,e,n,o){var l=n,r=o,s=t,i=e,a=I();c.style.width=Math.max(l-2*E.borderWidth,0)+"px",c.style.height=Math.max(r-2*E.borderWidth,0)+"px",c.style.left=s+"px",c.style.top=i+"px",c.style.borderWidth=E.borderWidth+"px",v.style.width=Math.max(s,0)+"px",v.style.height=Math.max(a.height,0)+"px",v.style.left="0px",v.style.top="0px",v.style.bottom="auto",y.style.width="auto",y.style.height=Math.max(a.height,0)+"px",y.style.left=s+l+"px",y.style.right="0px",y.style.top="0px",y.style.bottom="auto",x.style.width=Math.max(l,0)+"px",x.style.height=Math.max(i,0)+"px",x.style.left=s+"px",x.style.top="0px",x.style.bottom="auto",w.style.width=Math.max(l,0)+"px",w.style.height=Math.max(a.height-(i+r),0)+"px",w.style.left=s+"px",w.style.top=i+r+"px",w.style.bottom="auto"},P=function(){var t=F(c),n=I(),o=t.top-n.top,l=n.top+n.height-(t.top+t.height),r=t.left-n.left,s=n.left+n.width-(t.left+t.width);l>=o?e.addClass(c,E.cssFocusBoxTop):e.addClass(c,E.cssFocusBoxBottom),s>=r?e.addClass(c,E.cssFocusBoxLeft):e.addClass(c,E.cssFocusBoxRight)},k=function(){for(var t=[E.cssFocusBoxLeft,E.cssFocusBoxRight,E.cssFocusBoxTop,E.cssFocusBoxBottom],n=0,o=t.length;o>n;n++)e.removeClass(c,t[n])},H=function(){if(e.removeEvent(e.window,"orientationchange",K),e.removeEvent(e.window,"resize",K),e.removeEvent(f,"click",q),e.removeEvent(f,"touchstart",q),e.removeEvent(m,"click",z),e.removeEvent(m,"touchstart",z),e.removeEvent(g,"click",J),e.removeEvent(g,"touchstart",J),!B())for(var t=[v,y,x,w],n=0,o=t.length;o>n;n++)e.removeEvent(t[n],"click",J),e.removeEvent(t[n],"touchstart",J);for(var l=[g,m,f,h,p,c,v,y,x,w],n=l.length-1;n>=0;n--)e.removeElement(l[n]),l[n]=null;E&&E.onAfterClose&&E.onAfterClose(e)},O=function(){E&&E.onBeforeClose&&E.onBeforeClose(e);var t=[c,v,y,x,w];A(function(e){e=1-e;for(var n=t.length-1;n>=0;n--)C(t[n],e)},E.fadeOut,H)},U=function(t){i=t||o[0].set||E.defaultSet,s=[];for(var e=0,n=o.length;n>e;e++)o[e].set==i&&s.push(o[e]);if(0==s.length)throw new Error("uiGlide: This set is empty or doesn't exist.");return j(s)},V=function(){if(c=G(),c.className=E.cssFocusBox,E.parent.appendChild(c),d=e.document.createElement("DIV"),d.innerHTML=E.htmlFocusContent,d.className=E.cssFocusContent,c.appendChild(d),p=e.document.createElement("DIV"),p.className=E.cssTitleBox,c.appendChild(p),h=e.document.createElement("DIV"),h.className=E.cssDescBox,c.appendChild(h),f=e.document.createElement("DIV"),f.className=E.cssPrevBtn,f.innerHTML=E.htmlPrevBtn,c.appendChild(f),m=e.document.createElement("DIV"),m.className=E.cssNextBtn,m.innerHTML=E.htmlNextBtn,c.appendChild(m),g=e.document.createElement("DIV"),g.className=E.cssCloseBtn,g.innerHTML=E.htmlCloseBtn,c.appendChild(g),e.addEvent(f,"click",q),e.addEvent(f,"touchstart",q),e.addEvent(m,"click",z),e.addEvent(m,"touchstart",z),e.addEvent(g,"click",J),e.addEvent(g,"touchstart",J),v=G(),v.className=E.cssLeftBox,E.parent.appendChild(v),y=G(),y.className=E.cssRightBox,E.parent.appendChild(y),x=G(),x.className=E.cssTopBox,E.parent.appendChild(x),w=G(),w.className=E.cssBottomBox,E.parent.appendChild(w),!B())for(var t=[v,y,x,w],n=0,o=t.length;o>n;n++)e.addEvent(t[n],"click",J),e.addEvent(t[n],"touchstart",J);e.addEvent(e.window,"orientationchange",K),e.addEvent(e.window,"resize",K);var l=I(),r=200,s=200,i=.5*l.width-r,a=100;D(i,a,r,s)},W=function(t,n){E&&E.onBeforeOpen&&E.onBeforeOpen(e),V(),A(function(t){C(c,t)},E.fadeIn);var o=[v,y,x,w];A(function(t){for(var e=o.length-1;e>=0;e--)C(o[e],t)},1.5*E.fadeIn),E&&E.onAfterOpen&&E.onAfterOpen(e),U(t),M(n)},X=function(){for(var t=[],n=e.getElementByAttrValue(E.dataUIStep,null,E.parent),o=0,l=n.length,r=0,s=null,i="",a="",u="",c=null;l>o;o++)r=parseInt(e.getAttr(n[o],E.dataUIStep),10),s=e.getAttr(n[o],E.dataUISet),i=e.getAttr(n[o],E.dataUITitle),a=e.getAttr(n[o],E.dataUIDesc),u=e.getAttr(n[o],E.dataUIHtml),c=e.getAttr(n[o],E.dataUIPassthrough),t.push({index:r,element:n[o],set:s||E.defaultSet,title:i,desc:a,html:u,passthrough:c||E.passthrough,onBeforeStep:E.onBeforeStep,onAfterStep:E.onAfterStep,onStep:E.onStep,uiGlide:e});return t},Y=function(t){for(var e=0,n=t.length;n>e;e++)t.index=e,t.set||(t.set=E.defaultSet),(void 0===t.passthrough||null===t.passthrough)&&(t.passthrough=E.passthrough),t.onBeforeStep||(t.onBeforeStep=E.onBeforeStep),t.onAfterStep||(t.onAfterStep=E.onAfterStep),t.onStep||(t.onStep=E.onStep);return t},R=function(t){return t.sort(function(t,e){return t.set==e.set?0:+(t.set>e.set)||-1}),t},j=function(t){return t.sort(function(t,e){return t.index==e.index?0:+(t.index>e.index)||-1}),t},$=function(t,n){for(var o=0,l=t.length;l>o;o++)n[o]&&(t[o]?t[o]=e.wash(t[o],n[o]):t[o]=n[o]);for(var o=0,l=n.length;l>o;o++)!t[o]&&n[o]&&(t[o]=n[o]);return e.arrayClean(t)},q=function(t){var n=e.normaliseEvent(t);n.preventDefault(),N()},z=function(t){var n=e.normaliseEvent(t);n.preventDefault(),L()},J=function(t){var n=e.normaliseEvent(t);n.preventDefault(),O()},K=function(t){clearTimeout(u),u=setTimeout(function(){M(l)},250)},Q=function(){if(t&&(E=e.wash(E,t),e.window=t.window||window,e.document=t.document||document),!E.parent||!E.parent.appendChild)throw new Error("uiGlide: Cannot append elements to the settings.parent element.");var n=X(),l=Y(E.steps);o=$(n,l),o=R(o)};e.open=W,e.close=O,e.next=L,e.prev=N,e["goto"]=M,e.getFocusBox=function(){return c},e.getSettings=function(){return E},e.getSteps=function(){return s},e.getStep=function(t){return s[t]||null},e.getCurrentSet=function(){return s},e.getCurrentSetName=function(){return i},e.getCurrentStep=function(){return r},e.getCurrentStepIndex=function(){return l},e.getVersion=function(){return n},e.window=window,e.document=document,Q()}uiGlide.prototype.constructor=uiGlide,uiGlide.prototype.arrayClean=function(t){for(var e=[],n=0,o=t.length;o>n;n++)t[n]&&e.push(t[n]);return e},uiGlide.prototype.wash=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n]=e[n]);return t},uiGlide.prototype.removeElement=function(t){return t&&t.parentElement&&t.parentElement.removeChild(t),t=null},uiGlide.prototype.hasClass=function(t,e){return t&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},uiGlide.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},uiGlide.prototype.removeClass=function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").trim()}},uiGlide.prototype.getElementByAttrValue=function(t,e,n,o){n=n||this.document;var l=null!=e?"["+t+"='"+e+"']":"["+t+"]",r=n.querySelectorAll&&n.querySelectorAll(l)||null;if(!r)for(var s=null,i=0,r=[],a=n.getElementsByTagName("*");s=a[i++];){var u=this.getAttr(s,t);null==e&&u?r.push(s):null!=e&&u==e&&r.push(s)}return o?r[0]||null:r},uiGlide.prototype.getAttr=function(t,e){var n=t.getAttribute&&t.getAttribute(e)||null;if(!n)for(var o=t.attributes||[],l=o.length,r=0;l>r;r++)o[r].nodeName===e&&(n=o[r].nodeValue);return n},uiGlide.prototype.addEvent=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n),t},uiGlide.prototype.removeEvent=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n),t},uiGlide.prototype.normaliseEvent=function(t){if(t=t||this.window.event){var e=t.type,n=t.currentTarget||t.srcElement,o=function(){t.preventDefault?t.preventDefault():t.returnValue=!1},l=function(){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},r=t.touches,s=t.which||{};null!=t.which||null==t.charCode&&null==t.keyCode||(s=null!=t.charCode?t.charCode:t.keyCode);var i=t.which||{};null==t.which&&void 0!==t.button&&(i=1&t.button?1:2&t.button?3:4&t.button?2:0),null!=r&&(i=r.length>1?3:1);var a=this.window.scrollX||this.window.pageXOffset||this.document.documentElement.scrollLeft,u=this.window.scrollY||this.window.pageYOffset||this.document.documentElement.scrollTop,c=0,d=0;return t.changedTouches?(c=t.changedTouches[0].clientX||0,d=t.changedTouches[0].clientY||0):(c=t.clientX||t.pageX||0,d=t.clientY||t.pageY||0),c+=a,d+=u,{event:t,element:n,type:e,key:s,which:i,touches:r,top:d,left:c,preventDefault:o,stopPropagation:l}}return null},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});