/*!
 * uiGlide v1.0.0
 * http://uiglide.com
 *
 * Copyright WCP Digital and Patrick Purcell
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 * Date: 2016-07-25
 */
"use strict";function uiGlide(t){var e=this,n="1.0.0",o=[],r=0,i=null,l=[],a="",s=!1,u=!1,c=null,d=null,p=null,h=null,f=null,m=null,g=null,v=null,x=null,y=null,E=null,w=null,B=null,b=null,C=null,S={parent:document.body||null,steps:[],defaultSet:"uiGlide",resetScrollbars:!0,fadeIn:1e3,fadeOut:500,documentPadding:20,transition:500,padding:10,borderWidth:1,minWidth:180,minHeight:200,maxWidth:800,maxHeight:600,passthrough:!0,dataUISet:"data-uigset",dataUIStep:"data-uigstep",dataUITitle:"data-uigtitle",dataUIDesc:"data-uigdesc",dataUIHtml:"data-uightml",dataUIPassthrough:"data-uigpassthrough",cssLeftBox:"uig-box uig-box-left",cssRightBox:"uig-box uig-box-right",cssTopBox:"uig-box uig-box-top",cssBottomBox:"uig-box uig-box-bottom",cssFocusBox:"uig-focusbox",cssFocusBoxLeft:"uig-focusbox-left",cssFocusBoxRight:"uig-focusbox-right",cssFocusBoxTop:"uig-focusbox-top",cssFocusBoxBottom:"uig-focusbox-bottom",cssFocusContent:"uig-focus-content",cssTitleBox:"uig-titlebox",cssDescBox:"uig-descbox",cssControlsBox:"uig-controlsbox",cssPrevBtn:"uig-btn uig-btn-prev",cssNextBtn:"uig-btn uig-btn-next",cssCloseBtn:"uig-btn uig-btn-close",htmlPrevBtn:'<a href="javascript:void(0)">&lt;</a>',htmlNextBtn:'<a href="javascript:void(0)">&gt;</a>',htmlCloseBtn:'<a href="javascript:void(0)">&#10006;</a>',htmlFocusContent:"",htmlControlsContent:"",onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,onBeforeGoto:null,onAfterGoto:null,onBeforeStep:null,onAfterStep:null,onStep:null},T=function(){return"ontouchstart"in window||navigator.maxTouchPoints},A=function(t,e,n){return t+n*(e-t)},I=function(t,e){t.style.opacity=e;var n=100*e;t.style.filter="alpha(opacity="+n+")"},H=function(t,e,n){var o=60,r=0,i=Date.now(),l=1e3/o,a=e,s=0,u=0,c=setInterval(function(){return s=u/a,s>=1?(t(1),clearInterval(c),n&&n()):(t(s),r=Math.floor(1/(.001*(Date.now()-i))),i=Date.now(),void(u+=l*(o/r)))},l);return c},W=function(t){var n=e.document,o=e.window,r=0,i=0;return t!==n.body&&t!==n.documentElement?(r=t.scrollLeft,i=t.scrollTop):(r=o.scrollX||o.pageXOffset||n.documentElement.scrollLeft,i=o.scrollY||o.pageYOffset||n.documentElement.scrollTop),{left:r,top:i}},F=function(){var t=e.document.body,n=e.document.documentElement,o=Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),r=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);return{width:o,height:r,left:0,top:0}},G=function(t){var n=e.document,o=e.window,r=t.getBoundingClientRect(),i=r.left+(o.scrollX||o.pageXOffset||n.documentElement.scrollLeft),l=r.top+(o.scrollY||o.pageYOffset||n.documentElement.scrollTop),a=r.right-r.left,s=r.bottom-r.top,u=i+.5*a,c=l+.5*s;return{left:i,top:l,width:a,height:s,center:{left:u,top:c}}},M=function(t,n){var o=e.document;e.window;if(n==o.body||n==o.documentElement)return G(t);var r=W(n),i=n.getBoundingClientRect(),l=t.getBoundingClientRect(),a=l.left-i.left+r.left,s=l.top-i.top+r.top,u=l.right-l.left,c=l.bottom-l.top,d=a+.5*u,p=s+.5*c;return{left:a,top:s,width:u,height:c,center:{left:d,top:p}}},N=function(){var t=e.document.createElement("DIV");return t.style.position="absolute",t.style.display="block",t.style.width="0px",t.style.height="0px",t.style.left="0px",t.style.top="0px",t},L=function(){D(r+1)},P=function(){D(r-1)},D=function(t){if(S&&S.onBeforeGoto&&S.onBeforeGoto(e),c&&k(),(isNaN(t)||void 0===l[t])&&(t=0),i&&i.onAfterStep&&i.onAfterStep(e),i=l[t]||null,r=t,!i||!i.element)throw new Error("uiGlide: Step not found: Set: "+l+", Index: "+r);i&&i.onBeforeStep&&i.onBeforeStep(e),i&&i.title?(m.style.display="block",m.innerHTML=i.title):m.style.display="none",i&&i.desc?(g.style.display="block",g.innerHTML=i.desc):g.style.display="none",i.passthrough?(h.style.pointerEvents="none",v.style.pointerEvents="none",x.style.pointerEvents="auto",y.style.pointerEvents="auto",E.style.pointerEvents="auto"):(h.style.pointerEvents="auto",v.style.pointerEvents="auto"),f.innerHTML=i.html,h.style.borderWidth=i.borderWidth+"px",0>=t?x.style.display="none":x.style.display="block",t>=l.length-1?y.style.display="none":y.style.display="block";var n=M(h,S.parent),o=(parseInt(h.style.width,10),parseInt(h.style.height,10),parseInt(h.style.left,10),parseInt(h.style.top,10),W(S.parent));return R(i),c=H(function(t){var e=M(i.element,S.parent),r=2*i.padding,l=2*i.borderWidth,a=Math.max(e.width+r-l,i.minWidth),s=Math.max(e.height+r-l,i.minHeight);a=Math.min(a+r-l,i.maxWidth),s=Math.min(s+r-l,i.maxHeight);var u=e.center.left-.5*a,c=e.center.top-.5*s,d=F(),p={left:d.left+S.documentPadding,right:d.left+d.width-S.documentPadding,top:d.top+S.documentPadding,bottom:d.top+d.height-S.documentPadding};p.left>u&&(u+=p.left-u),p.right<u+a&&(a-=u+a-p.right),p.top>c&&(c+=p.top-c),p.bottom<c+s&&(s-=c+s-p.bottom);var h=A(n.left,u,t),f=A(n.top,c,t),m=A(n.width,a,t),g=A(n.height,s,t);V(h,f,m,g);var v=u-S.documentPadding,x=c-S.documentPadding,y=A(o.left,v,t),E=A(o.top,x,t);O(y-S.documentPadding,E-S.documentPadding)},i.transition,function(){k(),Y(i),i&&i.onStep&&i.onStep(e),S&&S.onAfterGoto&&S.onAfterGoto(e)}),e},k=function(){return clearInterval(c),c=null,e},O=function(t,n){var o=e.document,r=S.parent||null,i=r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth;i&&r&&r!==o.body&&r!==o.documentElement?(r.scrollLeft=t,r.scrollTop=n):(o.documentElement.scrollLeft=o.body.scrollLeft=t,o.documentElement.scrollTop=o.body.scrollTop=n)},U=function(t,e,n,o,r,i,l){t.style.width=e,t.style.height=n,t.style.left=o,t.style.top=r,t.style.right=i,t.style.bottom=l},V=function(t,e,n,o){var r=n,i=o,l=t,a=e,s=F();U(h,Math.max(r,0)+"px",Math.max(i,0)+"px",l+"px",a+"px","auto","auto"),U(v,Math.max(r,0)+"px",Math.max(i,0)+"px",l+"px",a+"px","auto","auto"),U(w,Math.max(l,0)+"px",Math.max(s.height,0)+"px","0px","0px","auto","auto"),U(B,"auto",Math.max(s.height,0)+"px",l+r+"px","0px","0px","auto"),U(b,Math.max(r,0)+"px",Math.max(a,0)+"px",l+"px","0px","auto","auto"),U(C,Math.max(r,0)+"px",Math.max(s.height-(a+i),0)+"px",l+"px",a+i+"px","auto","auto")},Y=function(t){var n=M(h,S.parent),o=F(),r=n.top-o.top,i=o.top+o.height-(n.top+n.height),l=n.left-o.left,a=o.left+o.width-(n.left+n.width),s="";s=i>=r?t.cssFocusBoxTop||S.cssFocusBoxTop:t.cssFocusBoxTop||S.cssFocusBoxBottom,e.addClass(h,s),s=a>=l?t.cssFocusBoxTop||S.cssFocusBoxLeft:t.cssFocusBoxTop||S.cssFocusBoxRight,e.addClass(h,s)},R=function(t){h.className=t.cssFocusBox||S.cssFocusBox},X=function(){if(e.removeEvent(e.window,"orientationchange",ot),e.removeEvent(e.window,"resize",ot),e.removeEvent(S.parent,"orientationchange",ot),e.removeEvent(S.parent,"resize",ot),e.removeEvent(x,"click",tt),e.removeEvent(x,"touchstart",tt),e.removeEvent(y,"click",et),e.removeEvent(y,"touchstart",et),e.removeEvent(E,"click",nt),e.removeEvent(E,"touchstart",nt),!T())for(var t=[w,B,b,C],n=0,o=t.length;o>n;n++)e.removeEvent(t[n],"click",nt),e.removeEvent(t[n],"touchstart",nt);for(var r=[E,y,x,g,m,h,v,w,B,b,C],n=r.length-1;n>=0;n--)e.removeElement(r[n]),r[n]=null;S&&S.onAfterClose&&S.onAfterClose(e),u=!1},z=function(){if(s)throw new Error("uiGlide: Tried to close before completing the opening.");u=!0,S&&S.onBeforeClose&&S.onBeforeClose(e),c&&k();var t=[h,v,w,B,b,C],n=W(S.parent);return H(function(e){if(S.resetScrollbars){var o=A(n.left,p.left,e),r=A(n.top,p.top,e);O(o,r)}e=1-e;for(var i=t.length-1;i>=0;i--)I(t[i],e)},S.fadeOut,X),e},j=function(t){a=t||o[0]&&o[0].set||S.defaultSet,l=[];for(var e=0,n=o.length;n>e;e++)o[e].set==a&&l.push(o[e]);if(0==l.length)throw new Error("uiGlide: This set is empty or doesn't exist.");return Z(l)},$=function(){if(h=N(),S.parent.appendChild(h),f=e.document.createElement("DIV"),f.innerHTML=S.htmlFocusContent,f.className=S.cssFocusContent,h.appendChild(f),m=e.document.createElement("DIV"),m.className=S.cssTitleBox,h.appendChild(m),g=e.document.createElement("DIV"),g.className=S.cssDescBox,h.appendChild(g),v=N(),v.innerHTML=S.htmlControlsContent,v.className=S.cssControlsBox,S.parent.appendChild(v),x=e.document.createElement("DIV"),x.className=S.cssPrevBtn,x.innerHTML=S.htmlPrevBtn,v.appendChild(x),y=e.document.createElement("DIV"),y.className=S.cssNextBtn,y.innerHTML=S.htmlNextBtn,v.appendChild(y),E=e.document.createElement("DIV"),E.className=S.cssCloseBtn,E.innerHTML=S.htmlCloseBtn,v.appendChild(E),e.addEvent(x,"click",tt),e.addEvent(x,"touchstart",tt),e.addEvent(y,"click",et),e.addEvent(y,"touchstart",et),e.addEvent(E,"click",nt),e.addEvent(E,"touchstart",nt),w=N(),w.className=S.cssLeftBox,S.parent.appendChild(w),B=N(),B.className=S.cssRightBox,S.parent.appendChild(B),b=N(),b.className=S.cssTopBox,S.parent.appendChild(b),C=N(),C.className=S.cssBottomBox,S.parent.appendChild(C),!T())for(var t=[w,B,b,C],n=0,o=t.length;o>n;n++)e.addEvent(t[n],"click",nt),e.addEvent(t[n],"touchstart",nt);e.addEvent(S.parent,"orientationchange",ot),e.addEvent(S.parent,"resize",ot),e.addEvent(e.window,"orientationchange",ot),e.addEvent(e.window,"resize",ot);var r=F(),i=200,l=200,a=.5*r.width-i,s=100;V(a,s,i,l)},q=function(t,n){if(u)throw new Error("uiGlide: Tried to open before completing the close.");if(h)throw new Error("uiGlide: You can only open one glide at a time.");s=!0,S&&S.onBeforeOpen&&S.onBeforeOpen(e),j(n),p=W(S.parent),$(),H(function(t){I(h,t),I(v,t)},S.fadeIn);var o=[w,B,b,C];return H(function(t){for(var e=o.length-1;e>=0;e--)I(o[e],t)},1.5*S.fadeIn),S&&S.onAfterOpen&&S.onAfterOpen(e),s=!1,D(t)},J=function(){for(var t=[],n=e.getElementByAttr(S.dataUIStep,S.parent),o=0,r=n.length,i=0,l=null,a="",s="",u="",c=null;r>o;o++)i=parseInt(e.getAttr(n[o],S.dataUIStep),10),l=e.getAttr(n[o],S.dataUISet),a=e.getAttr(n[o],S.dataUITitle),s=e.getAttr(n[o],S.dataUIDesc),u=e.getAttr(n[o],S.dataUIHtml),c=e.getAttr(n[o],S.dataUIPassthrough),t.push({index:i,element:n[o],title:a,desc:s,transition:S.transition,minWidth:S.minWidth,minHeight:S.minHeight,maxWidth:S.maxWidth,maxHeight:S.maxHeight,borderWidth:S.borderWidth,padding:S.padding,onBeforeStep:S.onBeforeStep,onAfterStep:S.onAfterStep,onStep:S.onStep,set:l||S.defaultSet,html:u||S.htmlFocusContent,passthrough:c||S.passthrough,uiGlide:e});return t},K=function(t){for(var e=0,n=t.length;n>e;e++)t.index=e,t.set||(t.set=S.defaultSet),t.html||(t.html=S.htmlFocusContent),t.transition||(t.transition=S.transition),t.minWidth||(t.minWidth=S.minWidth),t.minHeight||(t.minHeight=S.minHeight),t.maxWidth||(t.maxWidth=S.maxWidth),t.maxHeight||(t.maxHeight=S.maxHeight),(void 0===t.padding||null===t.padding)&&(t.padding=S.padding),(void 0===t.borderWidth||null===t.borderWidth)&&(t.borderWidth=S.borderWidth),(void 0===t.passthrough||null===t.passthrough)&&(t.passthrough=S.passthrough),t.onBeforeStep||(t.onBeforeStep=S.onBeforeStep),t.onAfterStep||(t.onAfterStep=S.onAfterStep),t.onStep||(t.onStep=S.onStep);return t},Q=function(t){return t.sort(function(t,e){return t.set==e.set?0:+(t.set>e.set)||-1}),t},Z=function(t){return t.sort(function(t,e){return t.index==e.index?0:+(t.index>e.index)||-1}),t},_=function(t,n){for(var o=0,r=t.length;r>o;o++)n[o]&&(t[o]?t[o]=e.wash(t[o],n[o]):t[o]=n[o]);for(var o=0,r=n.length;r>o;o++)!t[o]&&n[o]&&(t[o]=n[o]);return e.arrayClean(t)},tt=function(t){var n=e.normaliseEvent(t);n.preventDefault(),P()},et=function(t){var n=e.normaliseEvent(t);n.preventDefault(),L()},nt=function(t){var n=e.normaliseEvent(t);n.preventDefault(),z()},ot=function(t){clearTimeout(d),d=setTimeout(function(){D(r)},250)},rt=function(){if(t&&(S=e.wash(S,t),S.parent=S.parent||document.body,e.window=t.window||window,e.document=t.document||document),!S.parent||!S.parent.appendChild)throw new Error("uiGlide: Cannot append elements to the settings.parent element.");var n=J(),r=K(S.steps);o=_(n,r),o=Q(o)};e.open=q,e.close=z,e.next=L,e.prev=P,e["goto"]=D,e.stop=k,e.getFocusBox=function(){return h},e.getSettings=function(){return S},e.getSteps=function(){return l},e.getStep=function(t){return l[t]||null},e.getCurrentSet=function(){return l},e.getCurrentSetName=function(){return a},e.getCurrentStep=function(){return i},e.getCurrentStepIndex=function(){return r},e.getVersion=function(){return n},e.window=window,e.document=document,rt()}uiGlide.prototype.constructor=uiGlide,uiGlide.prototype.arrayClean=function(t){for(var e=[],n=0,o=t.length;o>n;n++)t[n]&&e.push(t[n]);return e},uiGlide.prototype.wash=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n]=e[n]);return t},uiGlide.prototype.removeElement=function(t){return t&&t.parentElement&&t.parentElement.removeChild(t),t=null},uiGlide.prototype.hasClass=function(t,e){return t&&!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},uiGlide.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},uiGlide.prototype.removeClass=function(t,e){if(this.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").trim()}},uiGlide.prototype.getElementByAttr=function(t,e,n){e=e||this.document;var o="["+t+"]",r=e.querySelectorAll&&e.querySelectorAll(o)||null;if(!r)for(var i=null,l=0,r=[],a=e.getElementsByTagName("*");i=a[l++];){var s=this.getAttr(i,t);s&&r.push(i)}return n?r[0]||null:r},uiGlide.prototype.getAttr=function(t,e){var n=t.getAttribute&&t.getAttribute(e)||null;if(!n)for(var o=t.attributes||[],r=o.length,i=0;r>i;i++)o[i].nodeName===e&&(n=o[i].nodeValue);return n},uiGlide.prototype.addEvent=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n),t},uiGlide.prototype.removeEvent=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n),t},uiGlide.prototype.normaliseEvent=function(t){if(t=t||this.window.event){var e=t.type,n=t.currentTarget||t.srcElement,o=function(){t.preventDefault?t.preventDefault():t.returnValue=!1},r=function(){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},i=t.touches,l=t.which||{};null!=t.which||null==t.charCode&&null==t.keyCode||(l=null!=t.charCode?t.charCode:t.keyCode);var a=t.which||{};null==t.which&&void 0!==t.button&&(a=1&t.button?1:2&t.button?3:4&t.button?2:0),null!=i&&(a=i.length>1?3:1);var s=this.window.scrollX||this.window.pageXOffset||this.document.documentElement.scrollLeft,u=this.window.scrollY||this.window.pageYOffset||this.document.documentElement.scrollTop,c=0,d=0;return t.changedTouches?(c=t.changedTouches[0].clientX||0,d=t.changedTouches[0].clientY||0):(c=t.clientX||t.pageX||0,d=t.clientY||t.pageY||0),c+=s,d+=u,{event:t,element:n,type:e,key:l,which:a,touches:i,top:d,left:c,preventDefault:o,stopPropagation:r}}return null},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});